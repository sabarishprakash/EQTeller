<div class="card-body" *ngIf="!success">
    <div class="container">
        <div *ngIf="isPosting">
            <mat-progress-bar color='warn' mode="indeterminate"></mat-progress-bar>
            <br/>
        </div>
        <form [formGroup]="asiForm" (ngSubmit)="onSubmit()">
            <table>
                <tr>
                    <td>
                        <mat-form-field style="width:60px !important;">
                            <mat-label>Branch</mat-label>
                            <input matInput type="text" formControlName="branch">
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field style="width:80px !important;">
                            <mat-label>Account</mat-label>
                            <input matInput type="text" formControlName="account" (blur)="getCustName()"
                                (input)="this.asiForm.patchValue({account: this.asiForm.value['account'].toUpperCase()})">
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field style="width:40px !important;">
                            <mat-label>Suffix</mat-label>
                            <input matInput type="text" formControlName="suffix">
                        </mat-form-field>
                    </td>
                    <td>
                        <div class="spinner-border text-primary mr-2" style="border-spacing: 2px;" *ngIf="fetchingCustomerName"></div>
                        <h5><output class="ml-2" id="customerName" *ngIf="customerName">{{ customerName }}</output></h5>
                    </td>
                </tr>
            </table>
            
            <table>
                <tr>
                    <td>
                        <mat-form-field style="width:80px !important;padding-right: 8px;">
                            <mat-label>Trx Code</mat-label>
                            <input matInput type="text" formControlName="tranCode" (blur)="getTransactionCodeName()">
                        </mat-form-field>
                    </td>
                    <td>
                        <div class="spinner-border text-primary mr-2" style="border-spacing: 2px;" *ngIf="fetchingTranName"></div>
                        <h5 class="ml-2" id="chargeCodeName" *ngIf="transactionCodeName">{{ transactionCodeName }}</h5>
                    </td>
                </tr>
            </table>
            
            <table>
                <tr>
                    <td>
                        <mat-form-field style="width:40px !important;">
                            <mat-label>Currency Code</mat-label>
                            <input matInput type="text" formControlName="currency">
                        </mat-form-field> 
                    </td>
                    <td>
                        <mat-form-field style="width:140px !important;">
                            <mat-label>Amount</mat-label>
                            <input matInput type="text" formControlName="amount">
                        </mat-form-field> 
                    </td>
                </tr>
            </table>

            <mat-form-field style="width:250px !important;">
                <mat-label>Narratives</mat-label>
                <textarea matInput formControlName="comments"></textarea>
            </mat-form-field>
            <br/>
            <button class="mr-2" type="submit" mat-raised-button color="primary" [disabled]="!asiForm.valid">Process</button>
            <button type="button" mat-raised-button color="warn" (click)="onCancel()">Clear</button>
        </form>
    </div>
</div>
<div class="card-body" *ngIf="success">
    <h2 class="text-center animatesuccess display-4">Success!</h2>
    <table class="table">
        <tbody>
            <tr>
                <td class="lead text-secondary font-italic">Customer</td>
                <td class="lead text-left" style="color: #00338E;"><b><i>{{customerName}}</i></b></td>
                <td class="lead text-secondary font-italic">Account</td>
                <td class="lead text-left" style="color: #00338E;"><b><i>{{asiForm.value['branch']}}-{{asiForm.value['account'].toUpperCase()}}-{{asiForm.value['suffix']}}</i></b></td>
            </tr>
            <tr>
                <td class="lead text-secondary font-italic">Transaction Code</td>
                <td class="lead text-left" style="color: #00338E;"><b><i>{{asiForm.value['tranCode'].toString()}}</i></b></td>
                <td class="lead text-secondary font-italic">Transaction Code Name</td>
                <td class="lead text-left" style="color: #00338E;"><b><i>{{transactionCodeName}}</i></b></td>
            </tr>
            <tr>
                <td class="lead text-secondary font-italic">Currency</td>
                <td class="lead text-left" style="color: #00338E;"><b><i>{{asiForm.value['currency']}}</i></b></td>
                <td class="lead text-secondary font-italic">Amount</td>
                <td class="lead text-left" style="color: #00338E;"><b><i>{{asiForm.value['amount'].toString()}}</i></b></td>
            </tr>
            <tr>
                <td class="lead text-secondary font-italic">Narratives</td>
                <td class="lead text-left" style="color: #00338E;">
                    <b><i>{{asiForm.value['comments']}}</i></b>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="text-center">
        <div class="btn btn-success" [routerLink]="['/actions']">OK</div>
    </div>
</div>